; ========================================
; Configuration commune
; ========================================
[common]
lib_deps = 
    bodmer/TFT_eSPI@^2.5.43
    fastled/FastLED@3.5.0

build_flags_common = 
    -I include
    -D USER_SETUP_LOADED=1
    -D ILI9341_DRIVER=1
    -D TFT_WIDTH=240
    -D TFT_HEIGHT=320
    -D LOAD_GLCD=1
    -D LOAD_FONT2=1
    -D LOAD_FONT4=1
    -D SMOOTH_FONT=1

; ========================================
; ESP8266 - Wemos D1 Mini
; ========================================
[env:d1_mini]
platform = espressif8266
board = d1_mini
framework = arduino
monitor_speed = 115200
upload_port = /dev/tty.usbserial-0206A689
monitor_port = /dev/tty.usbserial-0206A689

lib_deps = ${common.lib_deps}

; Configuration spécifique D1 Mini (ESP8266)
build_flags = 
    ${common.build_flags_common}
    -D ESP8266_BOARD=1
    -D LED_PIN=4           ; D2 = GPIO4
    -D TFT_MISO=12         ; D6
    -D TFT_MOSI=13         ; D7
    -D TFT_SCLK=14         ; D5
    -D TFT_CS=16           ; D0
    -D TFT_DC=15           ; D8
    -D TFT_RST=-1
    -D TOUCH_CS=0          ; D3
    -D SPI_FREQUENCY=27000000

; ========================================
; ESP32 - WEMOS LOLIN D32 PRO
; ========================================
[env:lolin_d32_pro]
platform = espressif32
board = lolin_d32_pro
framework = arduino
monitor_speed = 115200

lib_deps = ${common.lib_deps}

; Configuration spécifique LOLIN D32 PRO (ESP32)
; Pins du connecteur TFT_LCD intégré (SH1.0-10-L1)
build_flags = 
    ${common.build_flags_common}
    -D ESP32_BOARD=1
    -D LED_PIN=25          ; GPIO25 pour WS2812B (libre, pas de conflit)
    -D TFT_MISO=19         ; IO19/MISO (pin 5 connecteur)
    -D TFT_MOSI=23         ; IO23/MOSI (pin 6 connecteur)
    -D TFT_SCLK=18         ; IO18/SCK (pin 4 connecteur)
    -D TFT_CS=14           ; IO14/TFT_CS (pin 2 connecteur)
    -D TFT_DC=27           ; IO27/TFT_DC (pin 7 connecteur)
    -D TFT_RST=33          ; IO33/TFT_RST (pin 8 connecteur)
    -D TOUCH_CS=12         ; IO12/TS_CS (pin 1 connecteur)
    -D SPI_FREQUENCY=27000000

; ========================================
; ESP32 - WEMOS LOLIN D32 PRO + LVGL
; ========================================
[env:lolin_d32_pro_lvgl]
platform = espressif32
board = lolin_d32_pro
framework = arduino
monitor_speed = 115200

lib_deps = 
    ${common.lib_deps}
    lvgl/lvgl@^8.3.11      ; LVGL 8.x (compatible ESP32)

; Configuration ESP32 + LVGL
build_flags = 
    ${common.build_flags_common}
    -D ESP32_BOARD=1
    -D LED_PIN=25
    -D TFT_MISO=19
    -D TFT_MOSI=23
    -D TFT_SCLK=18
    -D TFT_CS=14
    -D TFT_DC=27
    -D TFT_RST=33
    -D TOUCH_CS=12
    -D SPI_FREQUENCY=27000000
    -D LV_CONF_INCLUDE_SIMPLE=1  ; LVGL trouve lv_conf.h automatiquement
    -D LV_LVGL_H_INCLUDE_SIMPLE=1
